<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<style>
		div {
			display: inline-block;
			width: 500px;
			background-color: pink;
		}

		p {
			display: inline-block;
			width: 100px;
			background-color: gainsboro;
			padding: 5px;
			margin: 4px;
		}
	</style>
</head>

<body>
	<!--lorem : 임의의 문장 생성--->

	단어입력 : <input type="text" id="word"><button id="btn">입력</button><br>
	<div id="wordlist">
	</div><br>

	<div id="timer">
	</div>

	<script>
		//document.querySelector('button').addEventListener('click', removeData);
		document.getElementById('word').addEventListener('change', removeData);

		let words = `Lorem, ipsum dolor sit amet consectetur adipisicing elit. Maiores veritatis molestiae, eius corporis, quis similique soluta omnis dolor obcaecati ratione, earum molestias quas rerum eligendi officiis modi maxime delectus voluptates?`;
		let wordAry = words.split(' ');
		wordAry.forEach(word => {
			let pTag = document.createElement('p');
			pTag.textContent = word;

			document.getElementById('wordlist').append(pTag);
		});

		//현재시간표시
		Date.prototype.timeFormater = function () {
			return ("0" + this.getHours()).slice(-2) + ":" + //
				("0" + this.getMinutes()).slice(-2) + ":" + //
				("0" + this.getSeconds()).slice(-2);
		}

		/* Date.prototype.timeFormater = function () {
		 	return (time + "초");
		 } */

		String.prototype.ltrim = function() {

		}

		// 시간 설정
		let time = 10;

		// 5초 있다가 한번만 실행
		setTimeout(function() {}, 5000);

		// clearInterval을 하기 전까지 계속 실행
		let timer1 = setInterval(() => {
			// 100초 -> 성공, 실패
			time--;
			console.log(time);
			//let timer = new Date();
			//document.getElementById('timer').textContent = timer.timeFormater();
			document.getElementById('timer').textContent = time;
			let items = document.querySelectiorAll('#wordlist > p');
			console.log(items);

			if(!items.length && time){
				alert('성공');
				clearInterval(timer1);
			} else if (!time){
				alert('실패');
				clearInterval(timer1);
			}

			/*if (document.querySelectorAll('p').length == 0) {
				alert('성공!')
				document.getElementById('timer').textContent = "성공";
				clearInterval(timer1); //setInterval을 종료하는 clearInterval()
			} else {
				if (time-- <= 0) {
					alert('실패!');
					document.getElementById('timer').textContent = "실패";
					clearInterval(timer1); //setInterval을 종료하는 clearInterval()
				}
			}*/
		}, 1000); // end of setInterval;
		
		document.getElementById('word').focus();

		// 삭제
		function removeData() {
			let w = document.querySelector('#word').value;

			document.querySelectorAll('#wordlist>p').forEach(p=>{
				if(p.textContent == w){
					p.remove();
				}
			})
			document.getElementById('word').value = null;

			/*document.querySelectorAll('p').forEach(data => {
				if (data.innerText == w) {
					data.remove();
					document.querySelector('#word').value = '';
				}
			});*/
		} // end of removeData()
		
	</script>
</body>

</html>